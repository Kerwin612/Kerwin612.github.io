#14. 从【自由变量】到【作用域链】
先解释一下什么是“自由变量”。  

在A作用域中使用的变量x，却没有在A作用域中声明（即在其他作用域中声明的），对于A作用域来说，x就是一个自由变量。如下图  
![](data:image/png;base64,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)  
如上程序中，在调用fn()函数时，函数体中第6行。取b的值就直接可以在fn作用域中取，因为b就是在这里定义的。而取x的值时，就需要到另一个作用域中取。到哪个作用域中取呢？  

**有人说过要到父作用域中取，其实有时候这种解释会产生歧义**。例如：  
![](data:image/png;base64,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)  
所以，不要在用以上说法了。相比而言，用这句话描述会更加贴切 —— **要到创建这个函数的那个作用域中取值——是“创建”，而不是“调用”，切记切记** —— 其实这就是所谓的“静态作用域”。  

对于本文第一段代码，在fn函数中，取自由变量x的值时，要到哪个作用域中取？ —— 要到创建fn函数的那个作用域中取 —— 无论fn函数将在哪里调用。  

 

上面描述的只是跨一步作用域去寻找。  

如果跨了一步，还没找到呢？——接着跨！ —— 一直跨到全局作用域为止。要是在全局作用域中都没有找到，那就是真的没有了。  

这个一步一步“跨”的路线，我们称之为 —— **作用域链**。  

我们拿文字总结一下取自由变量时的这个“作用域链”过程：（假设a是自由量）  

第一步，现在当前作用域查找a，如果有则获取并结束。如果没有则继续；  
第二步，如果当前作用域是全局作用域，则证明a未定义，结束；否则继续；  
第三步，（不是全局作用域，那就是函数作用域）将创建该函数的作用域作为当前作用域；  
第四步，跳转到第一步。  

![](data:image/png;base64,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)  
以上代码中：第13行，fn()返回的是bar函数，赋值给x。执行x()，即执行bar函数代码。取b的值时，直接在fn作用域取出。取a的值时，试图在fn作用域取，但是取不到，只能转向创建fn的那个作用域中去查找，结果找到了。  

 

这一节看似很轻松的把作用域链引出来，并讲完了。之所有轻松是有前几节的基础，否则将很难解释。  

接下来咱们开始正式说说一直期待依旧的朋友 —— 闭包。敬请期待下一节。  

